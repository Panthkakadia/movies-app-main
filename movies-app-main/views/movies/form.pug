extends ../layouts/layout.pug
block content
  .row
    .col-md-8.offset-md-2
      h1= movie._id ? 'Edit Movie' : 'Add Movie'
      form(method="POST", action=formAction)
        if movie._id
          input(type="hidden", name="_method", value="PUT")
        .mb-3
          label.form-label(for="name") Name
          input.form-control(type="text", name="name", required, value=movie.name)
        .mb-3
          label.form-label(for="description") Description
          textarea.form-control(name="description", required)= movie.description
        .mb-3
          label.form-label(for="year") Year
          input.form-control(type="number", name="year", required, min="1900", max=new Date().getFullYear(), value=movie.year)
        .mb-3
          label.form-label(for="genres") Genres (comma separated)
          input.form-control(type="text", name="genres", required, value=movie.genres ? movie.genres.join(', ') : '')
        .mb-3
          label.form-label(for="rating") Rating (0-10)
          input.form-control(type="number", name="rating", required, min="0", max="10", step="0.1", value=movie.rating)
        .mb-3
          label.form-label(for="poster") Poster URL (optional)
          input.form-control(type="text", name="poster", value=movie.poster)
        button.btn.btn-success.me-2(type="submit") Submit
        a.btn.btn-secondary(href="/movies") Cancel
        if errors
          ul.text-danger.mt-2
            each err in errors
              li= err.msg || err.message
